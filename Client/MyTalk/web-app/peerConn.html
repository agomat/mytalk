<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MyTalk P2P Video Chat</title>

    <link rel="stylesheet" type="text/css" href="font/roboto.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/common.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/call.css" media="screen" />
    
    <script src="js/libs/jquery-1.9.1.js"></script>
    <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
    <script src="js/libs/ember-1.0.0-rc.2.js"></script> 
    <script src="js/libs/ember-data.js"></script>
    
    <!-- bootstrap application -->
    <script src="js/app.js"></script>
    <!-- bootstrap StateManager -->
    <script src="js/statemanager/StateManager.js"></script>

    <!-- bootstrap Storage -->
    <script src="js/model/storage/IPAddressProxy.js"></script>
    <script src="js/model/storage/RequestManager.js"></script>
    <script src="js/model/storage/WebSocketConnection.js"></script>
    <script src="js/model/storage/WebSocketHandler.js"></script>
    <script src="js/model/storage/SocketAdapter.js"></script>

    <!-- bootstrap DS.Store -->
    <script src="js/store/Store.js"></script>

    <!-- bootstrap DS.Model -->
    <script src="js/model/modelstruct/ARI.js"></script>
    <script src="js/model/modelstruct/Authentication.js"></script>
    <script src="js/model/modelstruct/PersonalData.js"></script>
    <script src="js/model/modelstruct/WUser.js"></script>
    <script src="js/model/modelstruct/User.js"></script>
    <script src="js/model/modelstruct/Call.js"></script>
    <script src="js/model/modelstruct/List.js"></script>
    <script src="js/model/modelstruct/WList.js"></script>
    <script src="js/model/modelstruct/WCall.js"></script>

    <!-- bootstrap Router -->
    <script src="js/router/Router.js"></script>

    <!-- bootstrap controllers -->
    <script src="js/controller/Controller.js"></script>

    <!-- bootstrap RTCAdapter -->
    <script src="js/controller/communicator/PeerConnection.js"></script> 
      
    <script type="text/javascript">
        var PeerConnection = undefined;
        
        function createPeerConnection() {
            PeerConnection = MyTalk.PeerConnection.create();
        };
    </script>
  </head>
  <body onload="javascript:createPeerConnection()">
    <div id="content">
      <div id="videosContainer">
        <div id="remoteVideo">
          <h2>Remote video</h2>
          <video id="remote" autoplay>Your browser does not support the video tag</video>
        </div>
        <div id="localVideo">
          <h2>Local video</h2>
          <video id="local" autoplay muted>Your browser does not support the video tag</video>
        </div>
      </div>
      <div id="chat">
        <div id="textArea" class="scroll_content"></div>
        <input type="text" id="type" />
        <button id="send" class="common_button" onclick="javascript:Send()">Send</button>
      </div>
      <div id="call">
        <button id="callButton" class="common_button" onclick="javascript:Call()">Call!</button>
      </div>
    </div>
    <script type="text/javascript">
      function Call() {
        PeerConnection.start(true);
      };
      
      function Send() {
        var input = document.getElementById('type');
        var message = input.value;
        PeerConnection.send(message);
        input.value = "";
      };
    </script>
  </body>
  </html>
