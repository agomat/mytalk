<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MyTalk P2P Video Chat</title>
<script type="text/javascript" src="lib/jquery-2.0.0.min.js"></script>
    <script type="text/javascript" src="lib/handlebars-1.0.0-rc.3.js"></script>
    <script type="text/javascript" src="lib/ember-1.0.0-rc.3.js"></script> 
    <script type="text/javascript" src="lib/ember-data.js"></script>
    <script type="text/javascript" src="lib/list-view.js"></script>

    <!-- bootstrap application -->
    <script type="text/javascript" src="../com/mytalk/app.js"></script>

    <!-- bootstrap views -->
    
    <script type="text/javascript" src="../com/mytalk/view/templateview/IndexView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/ListsView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/DashboardView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/LoginFormView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/LoginView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/LoggedView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/RegisterFormView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/RegisterPassword.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/IPCall.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/CallView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/UsersView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/GuestView.js"></script>
    
    
 
    <script type="text/javascript" src="../com/mytalk/view/templateview/LoginView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/RegisterConfirmPassword.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/RegisterView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/RegisterSurname.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/HeaderView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/MessageFormView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateview/IPFormView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/LoginUsername.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/LoginPassword.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/RegisterEmail.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/RegisterName.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/RegisterUsername.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/SearchView.js"></script>
    <script type="text/javascript" src="../com/mytalk/view/templateform/MessageText.js"></script>
    
    <!-- bootstrap Router -->
    <script type="text/javascript" src="../com/mytalk/controller/router/Router.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/router/IndexRoute.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/router/GuestRoute.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/router/CallRoute.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/router/LoggedRoute.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/router/LoggedIndexRoute.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/router/ListRoute.js"></script>

    <!-- bootstrap StateManager -->
    <script type="text/javascript" src="../com/mytalk/controller/statemanager/StateManager.js"></script>



    <!-- bootstrap DS.Model -->
    
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/DryHelper.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/Authentication.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/PersonalData.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/User.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/List.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/Call.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/modelstruct/WCall.js"></script>


    <!-- bootstrap Requests -->

    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/AbstractOutProcessorProduct.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/ProcessorFactory.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/communication/AcceptCall.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/communication/RefuseCall.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/communication/UserCall.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/BlackListAdd.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/BlackListRemove.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/ListCreate.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/ListDelete.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/ListUserAdd.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/ListUserRemove.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/stats/AddCall.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/stats/GetCalls.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/user/CreateAccount.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/user/DeleteAccount.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/user/Login.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/user/LogoutToAnonymous.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/ListCreate.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/ListDelete.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/UpdateListName.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/outcoming/list/BlackListAdd.js"></script>

    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/AbstractInProcessorProduct.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/user/SuccessfulLoginAsAnonymous.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/user/SuccessfulLogin.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/user/StateUpdate.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/user/AuthenticationFailLogin.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/list/SuccessfulListCreate.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/list/SuccessfulRenameList.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/processing/processor/incoming/list/SuccessfulListDelete.js"></script>
    
    <!-- bootstrap Storage -->
    <script type="text/javascript" src="../com/mytalk/model/storage/ARI.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/WebSocketConnection.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/SocketAdapter.js"></script>
    <script type="text/javascript" src="../com/mytalk/model/storage/Store.js"></script>

    <!-- bootstrap controllers -->
    <script type="text/javascript" src="../com/mytalk/controller/controller/RequestHelper.js"></script>
    <script type="text/javascript" src="../com/mytalk/controller/controller/Controller.js"></script>

    <!-- bootstrap RTCAdapter -->
    <script type="text/javascript" src="../com/mytalk/controller/communicator/PeerConnection.js"></script> 

    <!-- bootstrap jQuery stuffs -->
    <script type="text/javascript" src="animation/animation.js"></script>
     <link type="text/css" rel="stylesheet" href="css/call.css" media="screen" />

      
    <script type="text/javascript">
        var PeerConnection = undefined;
        
        function createPeerConnection() {
            PeerConnection = MyTalk.PeerConnection.create();
        };
    </script>
  </head>
  <body onload="javascript:createPeerConnection()">
    <div id="call_content" class="scroll_content">
      
      <div id="chat">
        <ul id="messages">
          <li class="received_message">Ciao</li>
          <li class="sent_message">ciao ciao ciao ciao ciao ciao ciao ciao ciao ciao cia coaicosj oaaoj</li>
          <li class="received_message">ciao ciao ciao ciao ciao ciao ciao ciao ciao ciao cia coaicosj oaaoj</li>
          <li class="sent_message">Ciao</li>
        </ul>
        <form action="javascript:Send()">
          <fieldset>
            <legend hidden>Scrivi un messaggio</legend>
            <label for="text_input" hidden>Scrivi un messaggio</label> <textarea name="text_input" id="text_input" placeholder="Scrivi un messaggio"></textarea>
            <button type="submit" class="../common_button"> Invia</button>
          </fieldset>
        </form>
      </div>
      <div id="../comunicazione">
          <video id="local" autoplay muted></video>
          <video id="remote" autoplay></video>
          <a href="#" class="hangup_button"><img alt="" src="img/phone_hangup.png" />Riaggancia</a>
          <ul id="stats"> 
            <li><span>Tempo trascorso:</span>3299329849038242</li>
            <li><span>Byte ricevuti:</span>3299329849038242</li>
            <li><span>Byte trasmessi:</span>3299329849038242</li>
          </ul>


      </div>
    </div>
    <script type="text/javascript">
      function Call() {
        PeerConnection.start(true);
      };
      
      function Send() {
        var input = document.getElementById('text_input');
        var message = input.value;
        PeerConnection.send(message);
        input.value = "";
      };
    </script>
  </body>
</html>

